
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Jacob's Istio & Service Mesh Tutorial">
      
      
        <meta name="author" content="Jacob Xi">
      
      
        <link rel="canonical" href="https://chao-xi.github.io/jxistiobook/chap8/2Istio_install/">
      
      
        <link rel="prev" href="../1service_mesh/">
      
      
        <link rel="next" href="../3Istio_mon/">
      
      
      <link rel="icon" href="../../images/logo.jpeg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>第二节 安装 Istio - Jacob Istio & Service Mesh E-Book</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#istio" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="Jacob Istio &amp; Service Mesh E-Book" class="md-header__button md-logo" aria-label="Jacob Istio & Service Mesh E-Book" data-md-component="logo">
      
  <img src="../../images/logo.jpeg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Jacob Istio & Service Mesh E-Book
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              第二节 安装 Istio
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Chao-Xi/jxistiobook.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jxistiobook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Jacob Istio &amp; Service Mesh E-Book" class="md-nav__button md-logo" aria-label="Jacob Istio & Service Mesh E-Book" data-md-component="logo">
      
  <img src="../../images/logo.jpeg" alt="logo">

    </a>
    Jacob Istio & Service Mesh E-Book
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Chao-Xi/jxistiobook.git" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    jxistiobook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第一章: 微服务和 Service Mesh 核心组件
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            第一章: 微服务和 Service Mesh 核心组件
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/1chap1_learn_SM/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 Service Mesh 学习与架构分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/2chap1_service_register/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 服务注册中心
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/3chap1_load_balancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 负载均衡器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/4chap1_router/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 路由器及其限流熔断路由策略
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/5chap1_conn_pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 连接池：阻塞式连接池和多路复用连接池的差异
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/6chap1_apigateway_kong/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 微服务网关（Kong）：网关在微服务架构中的作用
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/7chap1_config_center/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 微服务治理的配置中心
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/8chap1_trace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第八节 Trace 更快速定位问题
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap1/9chap1_monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第九节 利用 Prometheus 和 Grafana 收集监控数据
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第二章: Service Mesh 实战
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            第二章: Service Mesh 实战
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/1chap2_sm_prods/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 Service Mesh 开源产品中的技术选型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/2chap2_sm_envoy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 最常用的数据面 Envoy介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/3chap3_isitio_17/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 Istio 入门：基于最新 1.7 版本的环境搭建和介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/4chap3_xds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 xDS：控制面和数据面的通信桥梁
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/5chap3_ingress_egress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 Ingress 和 Egress：入口流量和出口流量控制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/6chap3_canary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 金丝雀发布：金丝雀部署和版本控制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/7chap3_monitor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 如何利用组件做到服务的可观测性
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/8chap3_SM_GO_PROJ/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第八节 Proj项目落地: Go 实现 Service Mesh
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/9chap3_pratice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第九节 Service Mesh 落地和展望
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap2/10chap3_mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十节 Mesh的未来发展与可行性方向
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第三章: Istio基础教学
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            第三章: Istio基础教学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/0Service_Mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 服务网格(Service Mesh)是什么?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/1isba_Frame_Tech/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 Istio 架构与技术
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/2isba_Service_Find/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 Istio 服务发现和 Pilot的架构机制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/3isba_Gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 Gateway 设计与实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/4isba_Gray_release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 Istio 灰度发布与技术实现
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/5isba_Xds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 xDS协议解析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap3/6isba_Mixer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 Mixer基础与实现
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第四章: Istio(1.10.3)-Bookinfo 流量管理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            第四章: Istio(1.10.3)-Bookinfo 流量管理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/1Istio_Intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 2021 Service Mesh & Istio 介绍/安装(1.10.3)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/2Istio_flow_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 使用 Istio 实现非侵入流量治理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/3Istio_fault_inject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 Istio 流量管理之故障注入
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap4/4Istio_ServiceEntry_issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 Istio ServiceEntry 的填坑之路
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第五章: Istio 高级教学与实践
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            第五章: Istio 高级教学与实践
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/1Service_Mesh_Intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 服务网格的基本特征
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/2Istio_Intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 Istio 基本介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/3Istro_ServiceM_Prac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 Istio, Service Mesh 快速入门（Istio 1.1.16）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/4Istio_Helm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 用Helm部署Istio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/5Istio_funcs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 Istio 常用功能 （自动/手动部署Istio应用）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/6Istio_func2_grafana_prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 使用 Istio Dashboard Grafana / Prometheus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/7Istio_fun3_Jager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 使用 Istio Dashboard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/8Istio_func4_Kiali/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第八节 使用Kiali
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/9Istio_http1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第九节 HTTPS流量管理(目标规则/默认路由/流量的拆分和迁移)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/10Istio_http2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十节 HTTPS流量管理(金丝雀部署/源服务进行路由/URI进行重定向)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/11Istio_http3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十一节 HTTPS流量管理（通信超时/故障重试/入口~出口流量管理）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/12Istio_http4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十二节 HTTPS流量管理（服务熔断/故障注入测试/注入中断/流量复制)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/13Istio_Mixer1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十三节 Mixer 适配器的应用(简介/Denier访问控制/Listchecker访问控制)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/14Istio_Mixer2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十四节 Mixer 适配器的应用(MemQuota服务限流/Mixer对象的定义/RedisQuota服务限流)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/15Istio_Mixer3_prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十五节 Mixer 适配器的应用 - 为Prometheus定义监控指标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/16Istio_Mixer4_stdio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十六节 使用stdio输出自定义日志
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/17Istio_Mixer5_fluentd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十七节 使用Fluentd输出日志
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/18Istio_Sec1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十八节 Istio的安全加固（启用mTLS\加固概述)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/19Istio_Sec2_RBAC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十九节 Istio的安全加固(RBAC设置\拍错）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap5/20Istio_Usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二十节 Istio的试用建议
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第六章: 实验与教学bookinfo(istio-1.3)-old
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            第六章: 实验与教学bookinfo(istio-1.3)-old
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/1Istio_install_docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L1 Docker for Mac安装istio(istio-1.3)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/2BookInfo_1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L2 基于Bookinfo的流量管理配置(服务版本/基于权重/基于请求内容)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap6/3BookInfo_2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L3 基于Bookinfo的流量管理配置(延迟访问/中断访问/不同环境/服务网格外)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第七章: JenkinsX + Istio渐进式交付
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            第七章: JenkinsX + Istio渐进式交付
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/k8s_adv54_release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L1 Kubernetes中的渐进式交付:蓝绿部署和金丝雀部署shipper/Istio/Flagger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/k8s_adv56_jenkinsX/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L2 使用 Jenkins X 渐进式交付
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/k8s_adv57_Auto_Canary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L3 使用 Jenkins X 渐进式交付:自动化金丝雀部署
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap7/k8s_isitio_gray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L4 使用Rainbond+Istio实现灰度发布
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第八章: Tetrate Istio基础培训与实验测试
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            第八章: Tetrate Istio基础培训与实验测试
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1service_mesh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 服务网格和 Istio 概览
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    第二节 安装 Istio
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    第二节 安装 Istio
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-istio" class="md-nav__link">
    <span class="md-ellipsis">
      1、安装 Istio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1、安装 Istio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#istioctl" class="md-nav__link">
    <span class="md-ellipsis">
      使用Istioctl安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-operator" class="md-nav__link">
    <span class="md-ellipsis">
      使用Istio Operator安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      生产部署情况如何？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2getmesh" class="md-nav__link">
    <span class="md-ellipsis">
      2、GetMesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、GetMesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      如何开始？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getmeshistio" class="md-nav__link">
    <span class="md-ellipsis">
      使用GetMesh安装Istio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      验证配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-cli" class="md-nav__link">
    <span class="md-ellipsis">
      管理多个 Istio CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ca" class="md-nav__link">
    <span class="md-ellipsis">
      CA 集成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3、发现选择器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3、发现选择器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      配置发现选择器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4istio" class="md-nav__link">
    <span class="md-ellipsis">
      4、实验Istio安装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4、实验Istio安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sidecar" class="md-nav__link">
    <span class="md-ellipsis">
      启用sidecar注入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-istio" class="md-nav__link">
    <span class="md-ellipsis">
      4、测验：安装 Istio
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3Istio_mon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 可观察性：遥测和日志
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../4Istio_net_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 流量管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5Istio_net_control_exp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 流量管理实验与测试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6Istio_secruity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 Istio Secuirty
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7Istio_adv_feas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 Istio高级功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8Istio_trouble_shoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第八节 Istio 问题排查
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9Istio_real_instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第九节 实际案例
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10Istio_terms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第十节 术语表
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第九章: Istio日常操作与技巧
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            第九章: Istio日常操作与技巧
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/1Istio_intro_ppt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第一节 istio浅析 (Slide备案）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/2Istio_security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第二节 Istio 安全最佳实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/3Istio_service_entry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第三节 记一次 Istio ServiceEntry 的填坑之路
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/4Istio_istio_skill/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第四节 使用 Istio 的十个技巧
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/24Istio_troubleshoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 Istio 常见的 10 个异常分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/5istio_interview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第五节 Istio面试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/6k8s_mtls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第六节 Kubernetes 的 mTLS 指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap9/8istio_mtls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第七节 如何理解 Istio 中的 mTLS 流量加密？
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第10章: Istio架构及发展
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            第10章: Istio架构及发展
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/1istio_linked_consul/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Istiovs.Linkerdvs.Consul：服务网格该怎么选择？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/2istio_ambient/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Istio Ambient Mesh 介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap10/3aeraki/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 大规模场景下对Istio的性能优化
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第11章: Linkerd
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            第11章: Linkerd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/1linkered_sm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Linkerd Service Mesh 快速上手
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/2linkered_index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 在 Linkerd 中获取应用的黄金指标
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/3linkered_ServiceProfile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Linkerd 通过 ServiceProfile 实现超时和重试
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/4linkered_mtls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 在 Linkerd 中使用 mTLS 保护应用程序通信
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/5linkerd_flow_split/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 在 Linkerd 中实现流量拆分功能
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/6linkered_prod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 在生产环境中使用 Linkerd
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/7linkered_ingress/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Linkerd 与 ingress-nginx 结合使用以及对服务的访问限制
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap11/8linkerd_212/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 Linkerd 升级到全新的 2.12 版本
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    第12章: APIGateway & APISIX
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            第12章: APIGateway & APISIX
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/0apigatway_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0 微服务为什么要用到 API 网关？
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/1api_vs_lb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 API Gateway vs Load Balancer：选择适合你的网络流量管理组件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/2apigatway_sm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Service Mesh 和 API Gateway 关系深度
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/3apsix_fincloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Apache APISIX 在金融云原生的生产实践
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/4lambda_apisix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Amazon Lambda 遇上 Apache APISIX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/6k8s_gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Gateway Services under Kubernetes - APISIX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/7gateway_apisix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 云原生 API 网关 APISIX 入门教程
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/8apixsix_plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8 APISIX认证与自定义插件
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chap12/9apigateway2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9 API Gateway 技术漫谈 2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_14" >
        
          
          <label class="md-nav__link" for="__nav_14" id="__nav_14_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    extra
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_14">
            <span class="md-nav__icon md-icon"></span>
            extra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extra/mk_book/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GitHub+Travis+Mkdocs自动化构建文档库(Istio)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-istio" class="md-nav__link">
    <span class="md-ellipsis">
      1、安装 Istio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1、安装 Istio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#istioctl" class="md-nav__link">
    <span class="md-ellipsis">
      使用Istioctl安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-operator" class="md-nav__link">
    <span class="md-ellipsis">
      使用Istio Operator安装
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      生产部署情况如何？
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2getmesh" class="md-nav__link">
    <span class="md-ellipsis">
      2、GetMesh
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2、GetMesh">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      如何开始？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getmeshistio" class="md-nav__link">
    <span class="md-ellipsis">
      使用GetMesh安装Istio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      验证配置
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#istio-cli" class="md-nav__link">
    <span class="md-ellipsis">
      管理多个 Istio CLI
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ca" class="md-nav__link">
    <span class="md-ellipsis">
      CA 集成
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3、发现选择器
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3、发现选择器">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      配置发现选择器
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4istio" class="md-nav__link">
    <span class="md-ellipsis">
      4、实验Istio安装
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4、实验Istio安装">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sidecar" class="md-nav__link">
    <span class="md-ellipsis">
      启用sidecar注入
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-istio" class="md-nav__link">
    <span class="md-ellipsis">
      4、测验：安装 Istio
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="istio"><strong>第二节 安装 Istio</strong></h1>
<h2 id="1-istio"><strong>1、安装 Istio</strong></h2>
<ul>
<li>istioctl <ul>
<li>Command-line utilitiy </li>
</ul>
</li>
</ul>
<p>Istio Operator </p>
<ul>
<li>Uses a custom resource</li>
<li>Deals with Istio upgrades </li>
</ul>
<p><strong>Configuration profiles</strong></p>
<ul>
<li>Istio configuration profiles: <ul>
<li>default </li>
<li>demo </li>
<li>empty </li>
<li>minimal </li>
<li>preview </li>
<li>remote </li>
</ul>
</li>
</ul>
<p>我们有两种方法可以在单个Kubernetes集群上安装Istio：使用Istiocti (istiocti)或使用 Istio Operator。在本模块中，我们将使用Istio Operator在一个Kubernetes集群上安装 Istio。 </p>
<h3 id="istioctl"><strong>使用Istioctl安装</strong></h3>
<p>Istioctl 是一个命令行工具，我们可以用它来安装和定制Istio的安装。使用该命令行工具，我们生成一个包含所有Istio资源的YAML文件，然后将其部署到Kubernetes集群上。 </p>
<h3 id="istio-operator"><strong>使用Istio Operator安装</strong></h3>
<p>与istioctl相比，Istio Operator安装的优势在于，我们不需要手动升级Istio。相反，我们可 以部署Istio Operator，为你管理安装。我们通过更新一个自定义资源来控制Operator，而 Operator则为你应用配置变化。 </p>
<h3 id="_1"><strong>生产部署情况如何？</strong></h3>
<p>在决定Istio的生产部署模式时，还有一些额外的考虑因素需要牢记。我们可以配置Istio在不同的部署模型中运行―可能跨越多个集群和网络，并使用多个控制平面。我们将在高级功能 模块中了解其他部署模式、多集群安装以及在虚拟机上运行工作负载。</p>
<h2 id="2getmesh"><strong>2、GetMesh</strong></h2>
<p>Istio是最受欢迎和发展最快的开源项目之一。它的发布时间表对企业的生命周期和变更管理实 践来说可能非常激进。GetMesh通过针对不同的Ku bernetes分发版测试所有Istio版本以确保功能的完整性来解决这一问题。</p>
<p>GetMesh的Istio版本在安全补丁和其他错误更新方面得到 积极的支持，并拥有比上游Istio提供的更长的支持期。 一些服务网格客户需要支持更高的安全要求。</p>
<h3 id="_2"><strong>如何开始？</strong></h3>
<p>第一步是下载GetMesh CLI。你可以在macOS和Linux平台上安装GetMesh。我们可以使用以下命令下载最新版本的GetMesh并认证Istio0 </p>
<pre><code>curl -sL https://istio.tetratelabs.io/getmesh/install.sh | bash
</code></pre>
<pre><code>$ getmesh version
getmesh version: 1.1.3
active istioctl: 1.10.3-tetrate-v0
no running Istio pods in &quot;istio-system&quot;
1.10.3-tetrate-v0
</code></pre>
<p>版本命令输出<code>GetMesh</code>的版本、活跃的Istio CLI的版本以及Kubernetes集群上安装的 Istio的版本。 </p>
<h3 id="getmeshistio"><strong>使用GetMesh安装Istio</strong></h3>
<p>GetMesh通过Kubernetes配置文件与活跃的Kubernetes集群进行通信。 </p>
<p>要在当前活跃的Kubernetes集群上安装Istio的演示配置文件，我们可以像这样使用<code>getmesh istioctl</code>命令： </p>
<pre><code>getmesh istioctl install --set profile=demo
</code></pre>
<p>该命令将检查集群，以确保它准备好安装Istio，一旦你确认，安装程序将继续使用选定的配置文件安装Istio</p>
<p>如果我们现在检查版本，你会注意到输出显示控制平面和数据平面的版本。 </p>
<h3 id="_3"><strong>验证配置</strong></h3>
<p><code>config-validate</code>命令允许你对当前配置和任何尚未应用的YAML清单进行验证。 </p>
<p>该命令使用外部资源调用一系列验证，如上游Istio验证、Kiali库和GetMesh自定义配置检查。 </p>
<p>下面是一个命令输出的例子，如果没有标记为Istio注入的命名空间。 </p>
<pre><code>$ getmesh config-validate
Running the config validator. This may take some time...

Resource PeerAuthentication not found in the cluster. Maybe Istio has not been installed in your cluster. Please make sure Istio is installed before execute &quot;getmesh config-validate&quot;
</code></pre>
<p><img alt="Alt Image Text" src="../../images/chap8_2_1.png" title="body image" /> </p>
<pre><code>getmesh config-validate my-resource.yaml
</code></pre>
<h3 id="istio-cli"><strong>管理多个 Istio CLI</strong></h3>
<p>我们可以使用 show 命令来列出当前下载的 Istio 版本</p>
<pre><code>$ getmesh show
1.10.3-tetrate-v0 (Active)
</code></pre>
<p>如果电脑上没有我们想使用的版本，可以使用 <code>getmesh list</code> 命令来列出所有可信的 Istio 版本：</p>
<pre><code>$ getmesh list
ISTIO VERSION     FLAVOR    FLAVOR VERSION     K8S VERSIONS
   *1.10.3        tetrate         0         1.17,1.18,1.19,1.20
   1.10.3       tetratefips       0         1.17,1.18,1.19,1.20
   1.10.3          istio          0         1.17,1.18,1.19,1.20
    1.9.7         tetrate         0         1.17,1.18,1.19,1.20
    1.9.7       tetratefips       0         1.17,1.18,1.19,1.20
    1.9.7          istio          0         1.17,1.18,1.19,1.20
    1.9.5         tetrate         0         1.17,1.18,1.19,1.20
    1.9.5          istio          0         1.17,1.18,1.19,1.20
    1.9.4         tetrate         0         1.17,1.18,1.19,1.20
    1.9.4          istio          0         1.17,1.18,1.19,1.20
    1.9.0         tetrate         0         1.17,1.18,1.19,1.20
    1.9.0       tetratefips       1         1.17,1.18,1.19,1.20
    1.9.0          istio          0         1.17,1.18,1.19,1.20
    1.8.6         tetrate         0         1.16,1.17,1.18,1.19
    1.8.6          istio          0         1.16,1.17,1.18,1.19
    1.8.5         tetrate         0         1.16,1.17,1.18,1.19
    1.8.5          istio          0         1.16,1.17,1.18,1.19
    1.8.3         tetrate         0         1.16,1.17,1.18,1.19
    1.8.3       tetratefips       1         1.16,1.17,1.18,1.19
    1.8.3          istio          0         1.16,1.17,1.18,1.19
    1.7.8         tetrate         0           1.16,1.17,1.18
    1.7.8          istio          0           1.16,1.17,1.18
</code></pre>
<p>要获取一个特定的版本</p>
<pre><code>getmesh fetch --version 1.9.0 --flavor tetratefips --flavor-version 1
</code></pre>
<pre><code>$ getmesh show 
1.9.0-tetratefips-v1 (Active) 
1.9.5-tetrate-v0 
</code></pre>
<p>同样，如果我们运行 <code>getmesh istioctl version</code> ，我们会发现正在使用的 Istio CLI 的版本：</p>
<pre><code>$ getmesh istioctl version
client version: 1.9.0-tetratefips-v1
control plane version: 1.9.5-tetrate-v0
data plane version: 1.9.5-tetrate-v0 (2 proxies)
</code></pre>
<p>要切换到不同版本的 Istio CLI，我们可以运行 <code>getmesh switch</code>命令</p>
<pre><code>getmesh  switch --version 1.9.5 --flavor tetrate --flavor-version 0
</code></pre>
<h3 id="ca"><strong>CA 集成</strong></h3>
<p>我们没有使用自签的根证书，而是从 GCP CAS（证书授权服务）获得一个中间的 Istio 证书授权（CA）来签署工作负载证书</p>
<p>假设你已经配置了自己的 CAS 实例， 可以用 CA 的参数创建一个 YAML 配置。下面是 YAML 配置的一个例子：</p>
<pre><code>providerName: &quot;gcp&quot;
providerConfig:
  gcp:
  # 你在 GCP 上创建的证书授权的完整 CA 名称
   casCAName: &quot;projects/tetrate-io-istio/locations/us-west1/certificateAuthorities/tetrate-example-io&quot;

certificateParameters:
  secretOptions:
   istioCANamespace: &quot;istio-system&quot; # cacerts secret 所在的命名空间
   overrideExistingCACertsSecret: true # 重写已存在的 cacerts secret，使用新的替换
  caOptions:
   validityDays: 365 # CA 到期前的有效天数
   keyLength: 2048 # 创建的 key 的比特数
   certSigningRequestParams: # x509.CertificateRequest；大部分字段省略
    subject:
     commonname: &quot;tetrate.example.io&quot;
     country: 
      - &quot;US&quot;
     locality:
      - &quot;Sunnyvale&quot;
     organization:
      - &quot;Istio&quot;
     organizationunit:
      - &quot;engineering&quot;
    emailaddresses:
     - &quot;youremail@example.io&quot;
</code></pre>
<p>配置完成后，你可以使用 <code>gen-ca</code> 命令来创建 <code>cacert</code></p>
<pre><code>getmesh gen-ca --config-file gcp-cas-config.yaml
</code></pre>
<p>该命令在 <code>istio-system</code> 中创建 <code>cacert  Kubernetes Secret</code> 为了让 istiod 接受新的 cert，你必须重新启动 istiod。</p>
<p>如果你创建一个 sample 工作负载，并检查所使用的证书，你会发现是 CA 为工作负载发布的证书。</p>
<h2 id="3"><strong>3、发现选择器</strong></h2>
<p><strong>Discovery selectors</strong> </p>
<ul>
<li>Introduced in Istio 1.10 </li>
<li>Which namespaces to watch&amp;send configuration updates for </li>
<li>All proxies configured with information about all other services </li>
</ul>
<p><strong>Configuring discovery selectors</strong></p>
<ul>
<li>At the mesh level </li>
<li>List of Kubernetes selectors(e.g.hello=world,version=v1 ...) </li>
<li>Use <strong>discoverySelectors</strong> to limit the watched &amp; processed items </li>
</ul>
<p>发现选择器是Istio 1.10中引入的新功能之一。<strong>发现选择器允许我们控制Istio控制平面观察和发送配置更新的命名空间。</strong></p>
<p>默认情况下，Istlo控制平面会观察和处理集群中所有Ku bernetes资源的更新。服务网格中旷 所有Envoy代理的配置方式是，它们可以到达服务网格中的每个工作负载，并接受与工作负载相关的所有端口的流量。 </p>
<p><strong>例如，我们在不同的命名空间部署了两个工作负载―foo和bar</strong>。</p>
<p>尽管我们知道foo永远不会与bar通信，反之亦然，但一个服务的端点将被包含在另一个服务的已发现端点列表中。 </p>
<p><img alt="Alt Image Text" src="../../images/chap8_2_2.png" title="body image" /> </p>
<p><strong>如果我们运行<code>istioctl proxy-config</code>命令</strong>，列出foo命名空间的foo工作负载可以看到的所有端点，你会注意到一个名为bar的服务条目：</p>
<pre><code>$ istioctl proxy-config endpoints deploy/foo.foo
</code></pre>
<p><img alt="Alt Image Text" src="../../images/chap8_2_3.png" title="body image" /> </p>
<p>如果Istio不断用集群中每个服务的信息来更新代理，即使这些服务是不相关的，我们可以想象这将如何拖累事情。 </p>
<p><strong>如果这听起来很熟悉，你可能知道已经有一个解决方案了 - Sidecar资源。</strong> </p>
<h3 id="_4"><strong>配置发现选择器</strong></h3>
<p>发现选择器可以在<code>MeshConfig</code>中的Mesh层面上进行配置。它们是一个Kubernetes选择器的列表，指定了Istio在向sidecar推送配置时观察和更新的命名空间的集合。 </p>
<p>就像Sidecar资源一样, discoverySelectors可以用来限制被<code>Istio</code>观察和处理的项目数量</p>
<p>我们可以更新<code>IstioOperator</code>以包括<code>discoverySelectors</code>字段，如下所示： </p>
<pre><code>apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  namespace: istio-system
  name: istio-demo
spec:
  meshConfig:
   discoverySelectors:
   - matchLabels:
       env: test
</code></pre>
<p>上面的例子将<code>env=test</code>设置为一个匹配标签。这意昧着标有<code>env=test</code>标签的命名空间中的工作负载将被包含在Istio监控和更新的命名空间列表中。 </p>
<p>如果我们给foo命名空间贴上<code>env=test</code>标签，然后列出端点，我们会发现现在配置中列出的端点没有那么多。</p>
<p>这是因为我们标注的唯一命名空间是foo命名空间，这也是Istlo控制平面观察和发送更新的唯一命名空间。 </p>
<pre><code>$ istioctl proxy-config endpoints deploy/foo.foo
</code></pre>
<p><img alt="Alt Image Text" src="../../images/chap8_2_4.png" title="body image" /> </p>
<p><strong>如果我们把命名空间bar也贴上标签</strong>，然后重新运行<code>istiocti proxy-config</code>命令，我们会发现bar端点显示为foo服务配置的一部分。 </p>
<pre><code>$ istioctl proxy-config endpoints deploy/foo.foo
</code></pre>
<p><img alt="Alt Image Text" src="../../images/chap8_2_5.png" title="body image" /> </p>
<h2 id="4istio"><strong>4、实验Istio安装</strong></h2>
<pre><code>$ curl -L https://istio.io/downloadIstio | ISTIO_VERSION=1.10.3 sh -
$ cd istio-1.10.3
$ sudo cp bin/istioctl /usr/local/bin/istioctl
$ istioctl version
no running Istio pods in &quot;istio-system&quot;
1.10.3
</code></pre>
<p>Istlo支持多个配置文件（<code>profile</code>)。配置文件之间的区别在于所安装的组件。 </p>
<pre><code>$ istioctl profile list
Istio configuration profiles:
    default
    demo
    empty
    external
    minimal
    openshift
    preview
    remote    
</code></pre>
<p>推荐用于生产部署的配置文件是default配置文件。</p>
<p>我们将安装demo配置文件，因为它包含所有的核心组件，启用了跟踪和日志记录，便于学习不同的Istio功能。 </p>
<p>我们也可以从minimal的组件开始，以后单独安装其他功能，如ingress和egress网关。 </p>
<p>因为我们将使用Istio Operator进行安装，所以我们必须先部署Operator0</p>
<p>要部署<code>Istio Operator</code>，请运行 </p>
<pre><code>$ istioctl operator init
Installing operator controller in namespace: istio-operator using image: docker.io/istio/operator:1.10.3
Operator controller will watch namespaces: istio-system
✔ Istio operator installed                                                                                                                            
✔ Installation complete
</code></pre>
<p>init命令创建了   <code>istio-operator</code> 命名空间，并部署了CRD、Operator Deployment以及operator工作所需的其他资源。安装完成后，Operator就可以使用了。 </p>
<p>要安装Istio，我们必须创建<code>IstioOperator</code>资源，并指定我们要使用的配置配置文件。 
创建一个名为<code>demo-profile.yaml</code>的文件，内容如下： </p>
<pre><code>apiVersion: v1
kind: Namespace
metadata:
  name: istio-system
---
apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
metadata:
  namespace: istio-system
  name: demo-istio-install
spec:
  profile: demo
</code></pre>
<p>安装 istio 的工具和文件准备好过后，直接执行如下所示的安装命令即可，这里我们采用的是 <code>demo</code>配置组合的形式，这是因为它包含了一组专为测试准备的功能集合，另外还有用于生产或性能测试的配置组合。</p>
<pre><code>$  istioctl install --set profile=demo -y
✔ Istio core installed                                                                                                              
✔ Istiod installed                                                                                                                  
✔ Ingress gateways installed                                                                                                        
✔ Egress gateways installed                                                                                                         
✔ Installation complete                                                                                                             
Thank you for installing Istio 1.10.  Please take a few minutes to tell us about your install/upgrade experience!  https://forms.gle
/KjkrDnMPByq7akrYA
</code></pre>
<pre><code>$ kubectl apply -f demo-profile.yaml 
namespace/istio-system unchanged
istiooperator.install.istio.io/demo-istio-install created
</code></pre>
<p>一旦Operator检测到<code>IstioOperator</code>资源，它将开始安装Istio。整个过程可能需要5分钟左右。 </p>
<p>为了检查安装的状态，我们可以看看<code>istio-system</code>命名空间中的Pod的状态。 </p>
<pre><code>$ kubectl get pod -n istio-operator
NAME                            READY   STATUS    RESTARTS   AGE
istio-operator-dbc5db55-wjngn   1/1     Running   0          8m16s

$ kubectl get pod -n istio-system 
NAME                                   READY   STATUS    RESTARTS   AGE
istio-egressgateway-5547fcc8fc-7kj9c   1/1     Running   0          7m17s
istio-ingressgateway-8f568d595-zj9bs   1/1     Running   0          7m17s
istiod-6659979bdf-l7kgk                1/1     Running   0          7m23s
</code></pre>
<p>当所有的Pod都在运行时，Operator已经完成了Istio的安装。 </p>
<h3 id="sidecar"><strong>启用sidecar注入</strong></h3>
<p>服务网格需要让每个应用程序同时运行sidecar代理。 </p>
<p>要将sidecar代理注入到现有的Kubernetes部署中，我们可以使用<code>istioctl</code>命令中的 <code>kube-inject</code>动作。</p>
<p>然而，我们也可以在任意Kubernetes命名空间上启用sidecar自动注入。如果我们用 <code>istio-injection=enabled</code>标记命名空间，Istio会自动为我们在该命名空间中创建的所有 <code>Kubernetes Pod</code>注入<code>sidecar</code></p>
<p>让我们通过添加标签来启用default命名空间的sidecar自动注入。 </p>
<pre><code>$ kubectl label namespace default istio-injection=enabled
namespace/default labeled
</code></pre>
<p>要检查命名空间是否被标记，请运行下面的命令。defaul七命名空间应该是唯一一个启用了该值的命名空间。 </p>
<pre><code>$ kubectl get namespace -L istio-injection
NAME              STATUS   AGE   ISTIO-INJECTION
default           Active   12d   enabled
istio-operator    Active   22m   disabled
istio-system      Active   30m   
kube-demo         Active   12d   
kube-node-lease   Active   12d   
kube-public       Active   12d   
kube-system       Active   12d   
velero            Active   12d
</code></pre>
<p>现在我们可以尝试在defaul七命名空间创建一个Deployment，并观察注入的代理。我们将 创建一个名为<code>my-nginx</code>的<code>Deployment</code>，使用nginx镜像的单一容器。 </p>
<pre><code>kubectl create deploy my-nginx --image=nginx
</code></pre>
<pre><code>kubectl get pod 
NAME                        READY   STATUS    RESTARTS   AGE
my-nginx-6b74b79f57-ps779   2/2     Running   0          111s
</code></pre>
<pre><code>$ kubectl describe pod my-nginx-6b74b79f57-ps779
Events:
  Type    Reason     Age    From                     Message
  ----    ------     ----   ----                     -------
  Normal  Scheduled  2m27s  default-scheduler        Successfully assigned default/my-nginx-6b74b79f57-ps779 to docker-desktop
  Normal  Pulled     2m24s  kubelet, docker-desktop  Container image &quot;docker.io/istio/proxyv2:1.10.3&quot; already present on machine
  Normal  Created    2m23s  kubelet, docker-desktop  Created container istio-init
  Normal  Started    2m23s  kubelet, docker-desktop  Started container istio-init
  Normal  Pulling    2m22s  kubelet, docker-desktop  Pulling image &quot;nginx&quot;
  Normal  Pulled     98s    kubelet, docker-desktop  Successfully pulled image &quot;nginx&quot; in 44.2681088s
  Normal  Created    98s    kubelet, docker-desktop  Created container nginx
  Normal  Started    98s    kubelet, docker-desktop  Started container nginx
  Normal  Pulled     98s    kubelet, docker-desktop  Container image &quot;docker.io/istio/proxyv2:1.10.3&quot; already present on machine
  Normal  Created    98s    kubelet, docker-desktop  Created container istio-proxy
  Normal  Started    98s    kubelet, docker-desktop  Started container istio-proxy
</code></pre>
<h2 id="4-istio"><strong>4、测验：安装 Istio</strong></h2>
<p>1.安装后，Istio会自动将Envoy代理注入所有在default命名空间创建的Kubernetes部署中。对还是错？ </p>
<ul>
<li>A 对</li>
<li><strong><mark>B 错</mark></strong>    </li>
</ul>
<p>2.Istio有多个配置文件。哪种配置文件最适合生产部署？ </p>
<blockquote>
<p>Choose only ONE best answer. </p>
</blockquote>
<ul>
<li><strong><mark>Default profile</mark></strong>  </li>
<li>Production profile  </li>
<li>Minimal </li>
<li>Demo </li>
</ul>
<p>3.你可以用哪个标签来启用自动sidecar注入？ </p>
<blockquote>
<p>Choose only ONE best answer. </p>
</blockquote>
<ul>
<li>A injection=enabled </li>
<li>B sidecar-injection=1 </li>
<li><strong><mark>C istio-injection=enabled</mark></strong> </li>
<li>D inject＝true </li>
</ul>
<p>4.运行Envoy代理sidecar的容器的名称是什么？ </p>
<blockquote>
<p>Choose only ONE best answer. </p>
</blockquote>
<ul>
<li><strong><mark>A istio-proxy</mark></strong></li>
<li>B sidecar </li>
<li>C envoy-proxy </li>
<li>D proxy </li>
</ul>
<p>5。只可以使用Istio CLI (istiocti）来安装Istio，对还是错？ </p>
<blockquote>
<p>Choose only ONE best answer. </p>
</blockquote>
<ul>
<li>A 对</li>
<li><strong><mark>B 错</mark></strong> </li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021-9999 Jacob Xi
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>